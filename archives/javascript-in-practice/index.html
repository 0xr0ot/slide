<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<title>archives</title>
<style>
/* invert */
.invert {background: #fff;}
.invert #page .page {background: #fff;color: #000;}
.invert .right-top {color: #000;}
.invert .inner blockquote p,
.invert .inner pre,
.invert .inner code {color: #fff;background:#000;margin-left: 6px;}
.invert .inner pre,
.invert .inner ul,
.invert .inner ol {color:#fff;}
.invert .inner li {color:#000;}
/* base */
html{margin:0;padding:0;height:100%;}
body {margin:0;padding:0;height:100%;background: #000;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased;opacity:
1;color:#fff;font-family: Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";}
#page {width:100%;height:100%;position:relative;overflow-x:hidden;overflow-y:auto;}
.page{color:white;width:100%;height:100%;overflow:hidden;text-align:left;position:absolute;opacity:0;transition:transform
.8s ease;background:black;}
.prev {opacity:0.2;transform: translate(-100%, 0);}
.current {opacity:1;z-index:999;}
.next {opacity:0.2;transform: translate(100%, 0);}
.right-top {transition:all .5s ease;position: absolute;top: 20px;right:
20px;z-index: 99999;opacity: 0.4;}
.right-top:hover {opacity: 0.8;}
.switcher {background-color: rgba(123, 123, 123, 0.1);border: none;top:
0;font-size: 40px;margin: 0;max-width: 150px;min-width: 80px;outline:
none;padding: 0;position: absolute;top: 0;z-index: 9999;color: rgba(158, 158,
158, 0.5);height:100%;}
.switcher:hover, .switcher:focus {cursor: pointer;background-color: rgba(123, 123, 123, 0.2);}
#copyright { position: absolute; bottom: 20px; left: 50%; margin-left: -192px;
display: none;width: 384px;font-weight:bold;}
#copyright a {text-decoration: none;color: #D1C556;font-weight:bold;}
/* inner */
.inner {margin: 40px 100px;}
.inner a {text-decoration: none;color: #e7ad52;cursor:pointer;font-weight: bold;}
.inner h1 {font-size:55px;padding-bottom: 8px;}
.inner h2 {font-size:40px;padding-bottom: 20px;}
.inner h3 {font-size:30px;padding-bottom: 10px;}
.inner h4 {font-size:25px;padding-bottom: 5px;}
.inner p,
.inner blockquote,
.inner pre {margin: 0;font-size: 26px;line-height: 1.4em;margin-top:30px;}
.inner blockquote,
.inner pre,
.inner code {background: #2f3129;border-radius: 4px;padding: 2px
4px;margin-right:10px;margin-top:30px;font-weight:bold;overflow:hidden;word-wrap: break-word;}
.inner blockquote p {margin-top:0;word-spacing: 4px;padding: 4px;}
.inner pre
.inner ul,
.inner ol{font-size: 26px;line-height:1.4em;background:rgb(47, 47, 47);border-radius: 10px;padding: 10px 50px;}
.inner li {color: #fff;padding: 10px 4px;font-size: 22px;}
.inner hr {display:none;margin-top:10px;}
.inner table { table-layout:fixed; empty-cells:show; border-collapse:
collapse;margin:0 auto; border:2px solid #666; }
.inner table th,
.inner table td{text-align: left; border:1px solid #666; padding: 0.8em 1em;}
.inner table th { background: rgba(244, 253, 255, 0.24);font-weight: bold;padding: 1em;}
.inner img{transition: all 1s linear;width:auto;}
.inner img:hover {width: 100%!important;}
/* thumbnail */
.thumbnail {background: #000;}
.thumbnail .page {position: static;display: inline-block;overflow:
hidden;cursor: pointer;width: 20%;height: 20%;background: rgba(128, 128, 128,
0.35);margin-left: 30px;margin-top: 20px; transform: none; border-radius:
10px;opacity:1;}
.thumbnail .page .inner {padding: 4px 10px; margin: 0;text-align: center;}
.thumbnail .page .inner h1,
.thumbnail .page .inner h2 {font-size: 22px; text-align: center;}
.thumbnail .page .inner ul,
.thumbnail .page .inner li,
.thumbnail .page .inner ol,
.thumbnail .page .inner pre,
.thumbnail .page .inner img,
.thumbnail .page .inner p,
.thumbnail .page .inner code,
.thumbnail .page .inner h3,
.thumbnail .page .inner h4,
.thumbnail .page .inner h5,
.thumbnail .page .inner h6,
.thumbnail .page .inner table,
.thumbnail .page .inner i,
.thumbnail .page .inner strong,
.thumbnail .page .inner b,
.thumbnail .page .inner hr,
.thumbnail .page .inner blockquote{display: none;}
.thumbnail #copyright {display: block;}
.thumbnail .switcher {display: none!important;}
/* highlight */
.hljs{display:block;overflow-x:auto;padding:.5em;background:#fdf6e3;color:#657b83;-webkit-text-size-adjust:none}.hljs-comment,.hljs-template_comment,.diff .hljs-header,.hljs-doctype,.hljs-pi,.lisp .hljs-string,.hljs-javadoc{color:#93a1a1}.hljs-keyword,.hljs-winutils,.method,.hljs-addition,.css .hljs-tag,.hljs-request,.hljs-status,.nginx .hljs-title{color:#859900}.hljs-number,.hljs-command,.hljs-string,.hljs-tag .hljs-value,.hljs-rules .hljs-value,.hljs-phpdoc,.hljs-dartdoc,.tex .hljs-formula,.hljs-regexp,.hljs-hexcolor,.hljs-link_url{color:#2aa198}.hljs-title,.hljs-localvars,.hljs-chunk,.hljs-decorator,.hljs-built_in,.hljs-identifier,.vhdl .hljs-literal,.hljs-id,.css .hljs-function{color:#268bd2}.hljs-attribute,.hljs-variable,.lisp .hljs-body,.smalltalk .hljs-number,.hljs-constant,.hljs-class .hljs-title,.hljs-parent,.hljs-type,.hljs-link_reference{color:#b58900}.hljs-preprocessor,.hljs-preprocessor .hljs-keyword,.hljs-pragma,.hljs-shebang,.hljs-symbol,.hljs-symbol .hljs-string,.diff .hljs-change,.hljs-special,.hljs-attr_selector,.hljs-subst,.hljs-cdata,.css .hljs-pseudo,.hljs-header{color:#cb4b16}.hljs-deletion,.hljs-important{color:#dc322f}.hljs-link_label{color:#6c71c4}.tex .hljs-formula{background:#eee8d5}

</style>
<base target="_blank"/>
</head>
<body>
<input type="hidden" id="mode" value=""/>
<div id="page">
<h1 id="ajax">Ajax</h1>
<p>Asynchronous Javascript And XML</p>
<h3 id="origin">origin</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> api = <span class="hljs-string">'https://api.github.com/users/xudafeng'</span>;

<span class="hljs-keyword">var</span> xmlHttp = <span class="hljs-keyword">new</span> XMLHttpRequest();

xmlHttp.open(<span class="hljs-string">'GET'</span>, api, <span class="hljs-literal">true</span>);

xmlHttp.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> </span>{
  <span class="hljs-keyword">if</span> (xmlHttp.readyState == <span class="hljs-number">4</span>) {
    <span class="hljs-built_in">console</span>.log(xmlHttp.responseText);
  }
};

xmlHttp.send(<span class="hljs-literal">null</span>);
</code></pre>
<p><img src="http://ww3.sinaimg.cn/mw1024/6d308bd9gw1eu3a5c099tj20ku0jmdil.jpg" alt=""></p>
<h1 id="jquery">jQuery</h1>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> api = 'https://api.github.com/users/xudafeng';

$.ajax({
  <span class="hljs-keyword">method</span>: '<span class="hljs-type">GET</span>',
  url: api,
  data: {
    foo: 'bar'
  }
}).done(function(msg) {
  console.log(msg);
});
</code></pre>
<h1 id="json">JSON</h1>
<p>JavaScript Object Notation</p>
<h3 id="jsonp">JSONP</h3>
<p>JSON with Padding</p>
<ul>
<li>script tag</li>
<li>javascript callback</li>
</ul>
<h1 id="reference">Reference</h1>
<ol>
<li><a href="http://www.json.org/">JSON</a></li>
<li><a href="http://api.jquery.com/jQuery.ajax/">jQuery.ajax</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest">MDN, Using_XMLHttpRequest</a></li>
</ol>
<h1 id="commonjs">commonjs</h1>
<h1 id="namespace">namespace</h1>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> bar = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'bar'</span>);
};

bar();

<span class="hljs-keyword">var</span> obj = {
  foo: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'foo'</span>);
  }
};

obj.foo();
</code></pre>
<h1 id="closure">closure</h1>
<p>start with closure</p>
<pre><code class="lang-javascript"><span class="hljs-list">(<span class="hljs-keyword">function</span><span class="hljs-list">()</span> <span class="hljs-collection">{
  console.log<span class="hljs-list">(<span class="hljs-keyword">this</span>)</span>
}</span>)</span><span class="hljs-list">()</span>
</code></pre>
<h1 id="module-exports">module.exports</h1>
<pre><code class="lang-javascript"><span class="hljs-built_in">module</span>.exports = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'foo'</span>);
}
</code></pre>
<h1 id="exports">exports</h1>
<pre><code class="lang-javascript">exports.foo = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'bar'</span>);
}
</code></pre>
<h1 id="amd">AMD</h1>
<pre><code class="lang-javascript">define(<span class="hljs-reserved">function</span>(<span class="hljs-built_in">require</span>, exports, <span class="hljs-built_in">module</span>) {
  <span class="hljs-reserved">var</span> foo = <span class="hljs-built_in">require</span>(<span class="hljs-string">'foo'</span>);
  <span class="hljs-reserved">var</span> bar = <span class="hljs-built_in">require</span>(<span class="hljs-string">'bar'</span>);

  <span class="hljs-built_in">console</span>.log(foo);
});
</code></pre>
<h1 id="webpack">webpack</h1>
<h1 id="reference">Reference</h1>
<ol>
<li><a href="http://www.commonjs.org/">commonjs</a></li>
<li><a href="http://webpack.github.io/">webpack</a></li>
</ol>
<h1 id="event">event</h1>
<p>publish/subscribe</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> EventEmitter = <span class="hljs-built_in">require</span>(<span class="hljs-string">'events'</span>).EventEmitter;

<span class="hljs-keyword">var</span> foo = <span class="hljs-keyword">new</span> EventEmitter();

foo.on(<span class="hljs-string">'bar'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(d)</span> </span>{
  <span class="hljs-built_in">console</span>.log(d)
});

foo.emit(<span class="hljs-string">'bar'</span>, {
  data: <span class="hljs-string">'data'</span>
});
</code></pre>
<h1 id="reference">Reference</h1>
<ol>
<li><a href="http://xudafeng.github.io/nodejs/events.html">nodejs, events</a></li>
</ol>
<h1 id="style">style</h1>
<h3 id="2-spaces-for-indention">2 Spaces for indention</h3>
<pre><code class="lang-javascript">
<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span> </span>{

  <span class="hljs-comment">// right</span>
  <span class="hljs-keyword">var</span> foo = <span class="hljs-string">'bar'</span>;

  <span class="hljs-comment">// wrong</span>
    <span class="hljs-keyword">var</span> foo = <span class="hljs-string">'bar'</span>;
}
</code></pre>
<h3 id="use-semicolons">Use Semicolons</h3>
<pre><code class="lang-javascript"><span class="hljs-comment">// right</span>
<span class="hljs-keyword">var</span> foo = <span class="hljs-string">'bar'</span>;

<span class="hljs-comment">// wrong</span>
<span class="hljs-keyword">var</span> foo = <span class="hljs-string">'bar'</span>
</code></pre>
<h3 id="80-characters-per-line">80 characters per line</h3>
<h3 id="use-single-quotes">Use single quotes</h3>
<pre><code class="lang-javascript"><span class="hljs-comment">// right</span>
<span class="hljs-keyword">var</span> foo = <span class="hljs-string">'bar'</span>;

<span class="hljs-comment">// wrong</span>

<span class="hljs-keyword">var</span> foo = <span class="hljs-string">"bar"</span>;
</code></pre>
<h3 id="opening-braces-go-on-the-same-line">Opening braces go on the same line</h3>
<pre><code class="lang-javascript"><span class="hljs-comment">// right</span>

<span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>) {
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'winning'</span>);
}

<span class="hljs-comment">// wrong</span>

<span class="hljs-keyword">if</span> (<span class="hljs-literal">true</span>)
{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'losing'</span>);
}
</code></pre>
<h3 id="declare-one-variable-per-var-statement">Declare one variable per var statement</h3>
<pre><code class="lang-javascript"><span class="hljs-comment">// right</span>

<span class="hljs-keyword">var</span> keys = [<span class="hljs-string">'foo'</span>, <span class="hljs-string">'bar'</span>];
<span class="hljs-keyword">var</span> values = [<span class="hljs-number">23</span>, <span class="hljs-number">42</span>];

<span class="hljs-comment">// wrong</span>

<span class="hljs-keyword">var</span> keys = [<span class="hljs-string">'foo'</span>, <span class="hljs-string">'bar'</span>],
values = [<span class="hljs-number">23</span>, <span class="hljs-number">42</span>];
</code></pre>
<h3 id="use-the-operator">Use the <code>===</code> operator</h3>
<pre><code class="lang-javascript">
<span class="hljs-comment">// right</span>

<span class="hljs-tag">if</span> (foo !== <span class="hljs-number">1</span>) {
  <span class="hljs-attribute">console</span>.<span class="hljs-function">log</span>(<span class="hljs-string">'bar'</span>);
}

<span class="hljs-comment">//wrong</span>

<span class="hljs-tag">if</span> (foo != <span class="hljs-number">1</span>) {
  <span class="hljs-attribute">console</span>.<span class="hljs-function">log</span>(<span class="hljs-string">'bar'</span>);
}
</code></pre>
<h3 id="reference">Reference</h3>
<ol>
<li><a href="https://github.com/felixge/node-style-guide">node-style-guide</a></li>
<li><a href="https://github.com/airbnb/javascript">Airbnb, javascript</a></li>
</ol>

</div>
<div class="right-top" id="radios">
  <label>invert</label>
  <input type="checkbox" id="invert"/>
  <label>normal</label>
  <input type="radio" name="slide" value="true" />
  <label>slide</label>
  <input id="slide" type="radio" name="slide" checked value="false"/>
</div>
<button id="left" class="switcher" style="left: 0px;">&lsaquo;</button>
<button id="right"   class="switcher" style="right: 0px;">&rsaquo;</button>
<div id="copyright">Thank you for enjoy. &copy; <a href="https://github.com/xudafeng/startserver"
target="_blank">Startserver</a> <iframe
src="http://ghbtns.com/github-btn.html?user=xudafeng&repo=startserver&type=watch&count=true"
allowtransparency="true" frameborder="0" scrolling="0" width="80px" height="20px"></iframe></div>
<script>
+function(global, undefined) {
  var isSlide = document.getElementById('slide').checked;
  var mode = document.getElementById('mode');
  var ispdf = mode.value === 'pdf';
  var index = location.hash.split('=')[1] || 1;
  var left = document.getElementById('left');
  var right = document.getElementById('right');
  var page = document.getElementById('page');
  var invert = document.getElementById('invert');
  var isThumbnail = false;
  var isInvert = false;
  page.designMode = 'on';
  var pages = page.children;
  var radios = document.getElementById('radios');

  function setCookie(name, value, expiresHours) {
    var cookieString = name + '=' + escape(value);

    if (expiresHours > 0) {
      var date = new Date();
      date.setTime( date.getTime + expiresHours * 3600 * 1000);
      cookieString = cookieString + ';expires=' + date.toGMTString();
    }
    document.cookie = cookieString;
  }

  function addClass(index, name) {

    if (!pages[index]) return;
    pages[index].className += ' ' + name;
  }

  function removeClass() {
    for (var i = 0; i < pages.length; i++) {
      pages[i].className = 'page';
    }
  }

  function direct(target) {
    left.style.display = 'block';
    right.style.display = 'block';
    if (index == 1) left.style.display = 'none';
    if (index == pages.length) right.style.display = 'none';
    location.href = target || '';
  }

  function prev() {
    if (index == 1) return;
    index --;
    direct('#page=' + index);
  }

  function next() {
    if (index == pages.length) return;
    index ++;
    direct('#page=' + index);
  }

  function thumbnail() {
    isThumbnail = !isThumbnail;
    editAble(isThumbnail ? 'false' : 'true');
    var cls = '';
    if (isInvert) cls += ' invert';
    if (isThumbnail) cls += ' thumbnail';
    document.body.className = cls;
  }

  function editAble(r) {
    page.contentEditable = r;
  }

  function slider() {
    if (index == 0) {
      return thumbnail();
    };
    removeClass();
    addClass(index - 1, 'current');
    setTimeout(function() {
      addClass(index, 'next');
      addClass(index - 2, 'prev');
    }, 16);
  }

  var temp = '';
  var counter = 0;
  for (var i = 0;i < pages.length; i++) {
    var current = pages[i];
    var tagName = current.tagName;
    var nextTag = pages[i + 1];
    var nextTagName = nextTag ? nextTag.tagName : null;

    if (i === 0 || tagName === 'H1' || tagName === 'H2') {
      temp += '<article class="page"';
      if (ispdf) {
        temp += ' style= "transform: translate(0, ' + 100 * counter + '%);"';
      }
      temp += '><div class="inner">';
      counter ++;
    }
    temp += current.outerHTML;

    if (nextTagName === 'H1' || nextTagName === 'H2') {
      temp += '<\/div><\/article>';
    }
  }

  page.innerHTML = temp + '<\/div><\/article>';
  pages = page.querySelectorAll('.page');

  if (ispdf) {
    return;
  }

  function delegate(target) {
    return target.nodeName && target.nodeName.toLowerCase() === 'article' ? target : delegate(target.parentElement);
  }

  function getIndex(e) {
    var p = e.parentNode;
    var c = p.children;
    for (var i=0; i < c.length; i++) {
      if (c[i] == e) {
        return i;
      };
    }
  }
  radios.addEventListener('click', function(e) {
    if (e.target.nodeName === 'INPUT' && e.target.value === 'true') {
      setCookie('startserver-slide', false, 240);
      direct();
    }
  });
  page.addEventListener('click', function(e) {
    if (!isThumbnail) return;
    var target = delegate(e.target);
    var index = getIndex(target) + 1;
    thumbnail();
    direct('#page=' + index);
  });
  global.addEventListener('hashchange', function() {
    index = location.hash.split('=')[1] || 1;
    slider();
  });
  global.addEventListener('mousewheel', function(e) {
    if (isThumbnail) return;
    var target = pages[index - 1];
    var delta = e.wheelDelta / 120;
    target.scrollTop += delta > 0 ? -10 : 10;
  });
  left.addEventListener('click', function() {
    prev();
  });
  right.addEventListener('click', function() {
    next();
  });
  page.addEventListener('dblclick', function() {
    if (isThumbnail) return;
    editAble(page.contentEditable === 'true' ? 'false' : 'true');
  });
  invert.addEventListener('change', function(e) {
    var target = e.target;
    isInvert = target.checked;
    var cls = '';
    if (isInvert) cls += ' invert';
    if (isThumbnail) cls += ' thumbnail';
    document.body.className = cls;
  });
  document.addEventListener('keydown', function(e) {
    switch (e.keyCode) {
      case 39:
      case 40:
        e.preventDefault();
        next();
        break;
      case 37:
      case 38:
        e.preventDefault();
        prev();
        break;
      case 27:
        e.preventDefault();
        direct('#page=' + 0);
        break;
    }
  });
  setTimeout(function() {
    var images = document.querySelectorAll('img');
    for (var i = 0; i < images.length; i ++) {
      images[i].setAttribute('style', 'width:' + images[i].width + 'px;');
    }
  }, 5000);
  setTimeout(function() {
    direct('#page=' + index);
    document.body.style.opacity = 1;
  }, 16);
}(this);
</script>
</body>
</html>
